<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ä»€ä¹ˆæ˜¯ WebAssemblyï¼Ÿ WebAssembly (abbreviated Wasm) is a binary instruction format for a stack-based virtual machine. Wasm is designed as a portable compilation target for programming languages, enabling deployment on the web for client and server applications.
â€• webassembly.org WebAssembly æ˜¯ä¸€ç§æ–°çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥åœ¨ç°ä»£çš„ç½‘ç»œæµè§ˆå™¨ä¸­è¿è¡Œ ï¼ å®ƒæ˜¯ä¸€ç§ä½çº§çš„ç±»æ±‡ç¼–è¯­è¨€ï¼Œå…·æœ‰ç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¯ä»¥æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½è¿è¡Œï¼Œå¹¶ä¸ºè¯¸å¦‚ C / C ++ç­‰è¯­è¨€æä¾›ä¸€ä¸ªç¼–è¯‘ç›®æ ‡ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨ Web ä¸Šè¿è¡Œã€‚å®ƒä¹Ÿè¢«è®¾è®¡ä¸ºå¯ä»¥ä¸ JavaScript å…±å­˜ï¼Œå…è®¸ä¸¤è€…ä¸€èµ·å·¥ä½œã€‚
å¯¹äºç½‘ç»œå¹³å°è€Œè¨€ï¼ŒWebAssembly å…·æœ‰å·¨å¤§çš„æ„ä¹‰â€”â€”å®ƒæä¾›äº†ä¸€æ¡é€”å¾„ï¼Œä»¥ä½¿å¾—ä»¥å„ç§è¯­è¨€ç¼–å†™çš„ä»£ç éƒ½å¯ä»¥ä»¥æ¥è¿‘åŸç”Ÿçš„é€Ÿåº¦åœ¨ Web ä¸­è¿è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»¥å‰æ— æ³•ä»¥æ­¤æ–¹å¼è¿è¡Œçš„å®¢æˆ·ç«¯è½¯ä»¶éƒ½å°†å¯ä»¥è¿è¡Œåœ¨ Web ä¸­ã€‚
WebAssembly è¢«è®¾è®¡ä¸ºå¯ä»¥å’Œ JavaScript ä¸€èµ·ååŒå·¥ä½œâ€”â€”é€šè¿‡ä½¿ç”¨ WebAssembly çš„ JavaScript APIï¼Œä½ å¯ä»¥æŠŠ WebAssembly æ¨¡å—åŠ è½½åˆ°ä¸€ä¸ª JavaScript åº”ç”¨ä¸­å¹¶ä¸”åœ¨ä¸¤è€…ä¹‹é—´å…±äº«åŠŸèƒ½ã€‚è¿™å…è®¸ä½ åœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­åˆ©ç”¨ WebAssembly çš„æ€§èƒ½å’Œå¨åŠ›ä»¥åŠ JavaScript çš„è¡¨è¾¾åŠ›å’Œçµæ´»æ€§ï¼Œå³ä½¿ä½ å¯èƒ½å¹¶ä¸çŸ¥é“å¦‚ä½•ç¼–å†™ WebAssembly ä»£ç ã€‚"><title>WebAssemblyäº†è§£ä¸€ä¸‹ï¼</title><link rel=canonical href=../../p/wasm/><link rel=stylesheet href=../../scss/style.min.46585415db6dc3a9642d340b4e16fbf0daba34fc227a5a87c12a7f2b99147f47.css><meta property="og:title" content="WebAssemblyäº†è§£ä¸€ä¸‹ï¼"><meta property="og:description" content="ä»€ä¹ˆæ˜¯ WebAssemblyï¼Ÿ WebAssembly (abbreviated Wasm) is a binary instruction format for a stack-based virtual machine. Wasm is designed as a portable compilation target for programming languages, enabling deployment on the web for client and server applications.
â€• webassembly.org WebAssembly æ˜¯ä¸€ç§æ–°çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥åœ¨ç°ä»£çš„ç½‘ç»œæµè§ˆå™¨ä¸­è¿è¡Œ ï¼ å®ƒæ˜¯ä¸€ç§ä½çº§çš„ç±»æ±‡ç¼–è¯­è¨€ï¼Œå…·æœ‰ç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¯ä»¥æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½è¿è¡Œï¼Œå¹¶ä¸ºè¯¸å¦‚ C / C ++ç­‰è¯­è¨€æä¾›ä¸€ä¸ªç¼–è¯‘ç›®æ ‡ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨ Web ä¸Šè¿è¡Œã€‚å®ƒä¹Ÿè¢«è®¾è®¡ä¸ºå¯ä»¥ä¸ JavaScript å…±å­˜ï¼Œå…è®¸ä¸¤è€…ä¸€èµ·å·¥ä½œã€‚
å¯¹äºç½‘ç»œå¹³å°è€Œè¨€ï¼ŒWebAssembly å…·æœ‰å·¨å¤§çš„æ„ä¹‰â€”â€”å®ƒæä¾›äº†ä¸€æ¡é€”å¾„ï¼Œä»¥ä½¿å¾—ä»¥å„ç§è¯­è¨€ç¼–å†™çš„ä»£ç éƒ½å¯ä»¥ä»¥æ¥è¿‘åŸç”Ÿçš„é€Ÿåº¦åœ¨ Web ä¸­è¿è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»¥å‰æ— æ³•ä»¥æ­¤æ–¹å¼è¿è¡Œçš„å®¢æˆ·ç«¯è½¯ä»¶éƒ½å°†å¯ä»¥è¿è¡Œåœ¨ Web ä¸­ã€‚
WebAssembly è¢«è®¾è®¡ä¸ºå¯ä»¥å’Œ JavaScript ä¸€èµ·ååŒå·¥ä½œâ€”â€”é€šè¿‡ä½¿ç”¨ WebAssembly çš„ JavaScript APIï¼Œä½ å¯ä»¥æŠŠ WebAssembly æ¨¡å—åŠ è½½åˆ°ä¸€ä¸ª JavaScript åº”ç”¨ä¸­å¹¶ä¸”åœ¨ä¸¤è€…ä¹‹é—´å…±äº«åŠŸèƒ½ã€‚è¿™å…è®¸ä½ åœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­åˆ©ç”¨ WebAssembly çš„æ€§èƒ½å’Œå¨åŠ›ä»¥åŠ JavaScript çš„è¡¨è¾¾åŠ›å’Œçµæ´»æ€§ï¼Œå³ä½¿ä½ å¯èƒ½å¹¶ä¸çŸ¥é“å¦‚ä½•ç¼–å†™ WebAssembly ä»£ç ã€‚"><meta property="og:url" content="/p/wasm/"><meta property="og:site_name" content="è¡”é£çš„åšå®¢"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2022-06-01T00:00:00+00:00"><meta property="article:modified_time" content="2022-06-01T00:00:00+00:00"><meta property="og:image" content="/p/wasm/wasm.png"><meta name=twitter:title content="WebAssemblyäº†è§£ä¸€ä¸‹ï¼"><meta name=twitter:description content="ä»€ä¹ˆæ˜¯ WebAssemblyï¼Ÿ WebAssembly (abbreviated Wasm) is a binary instruction format for a stack-based virtual machine. Wasm is designed as a portable compilation target for programming languages, enabling deployment on the web for client and server applications.
â€• webassembly.org WebAssembly æ˜¯ä¸€ç§æ–°çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥åœ¨ç°ä»£çš„ç½‘ç»œæµè§ˆå™¨ä¸­è¿è¡Œ ï¼ å®ƒæ˜¯ä¸€ç§ä½çº§çš„ç±»æ±‡ç¼–è¯­è¨€ï¼Œå…·æœ‰ç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¯ä»¥æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½è¿è¡Œï¼Œå¹¶ä¸ºè¯¸å¦‚ C / C ++ç­‰è¯­è¨€æä¾›ä¸€ä¸ªç¼–è¯‘ç›®æ ‡ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨ Web ä¸Šè¿è¡Œã€‚å®ƒä¹Ÿè¢«è®¾è®¡ä¸ºå¯ä»¥ä¸ JavaScript å…±å­˜ï¼Œå…è®¸ä¸¤è€…ä¸€èµ·å·¥ä½œã€‚
å¯¹äºç½‘ç»œå¹³å°è€Œè¨€ï¼ŒWebAssembly å…·æœ‰å·¨å¤§çš„æ„ä¹‰â€”â€”å®ƒæä¾›äº†ä¸€æ¡é€”å¾„ï¼Œä»¥ä½¿å¾—ä»¥å„ç§è¯­è¨€ç¼–å†™çš„ä»£ç éƒ½å¯ä»¥ä»¥æ¥è¿‘åŸç”Ÿçš„é€Ÿåº¦åœ¨ Web ä¸­è¿è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»¥å‰æ— æ³•ä»¥æ­¤æ–¹å¼è¿è¡Œçš„å®¢æˆ·ç«¯è½¯ä»¶éƒ½å°†å¯ä»¥è¿è¡Œåœ¨ Web ä¸­ã€‚
WebAssembly è¢«è®¾è®¡ä¸ºå¯ä»¥å’Œ JavaScript ä¸€èµ·ååŒå·¥ä½œâ€”â€”é€šè¿‡ä½¿ç”¨ WebAssembly çš„ JavaScript APIï¼Œä½ å¯ä»¥æŠŠ WebAssembly æ¨¡å—åŠ è½½åˆ°ä¸€ä¸ª JavaScript åº”ç”¨ä¸­å¹¶ä¸”åœ¨ä¸¤è€…ä¹‹é—´å…±äº«åŠŸèƒ½ã€‚è¿™å…è®¸ä½ åœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­åˆ©ç”¨ WebAssembly çš„æ€§èƒ½å’Œå¨åŠ›ä»¥åŠ JavaScript çš„è¡¨è¾¾åŠ›å’Œçµæ´»æ€§ï¼Œå³ä½¿ä½ å¯èƒ½å¹¶ä¸çŸ¥é“å¦‚ä½•ç¼–å†™ WebAssembly ä»£ç ã€‚"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/p/wasm/wasm.png"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=../../><img src=../../imgs/avatar2_hu71215836cfc1201dad43a2a602d405c9_1044873_300x0_resize_box_3.png width=300 height=299 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸ”</span></figure><div class=site-meta><h1 class=site-name><a href=../../>è¡”é£çš„åšå®¢</a></h1><h2 class=site-description>The only limit is your imagination.</h2></div></header><ol class=social-menu><li><a href=https://space.bilibili.com/9872607 target=_blank title=Bilibili><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="-3 -3 31 31" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><title>Bilibili icon</title><path d="M17.813 4.653h.854c1.51.054 2.769.578 3.773 1.574 1.004.995 1.524 2.249 1.56 3.76v7.36c-.036 1.51-.556 2.769-1.56 3.773s-2.262 1.524-3.773 1.56H5.333c-1.51-.036-2.769-.556-3.773-1.56S.036 18.858.0 17.347v-7.36c.036-1.511.556-2.765 1.56-3.76 1.004-.996 2.262-1.52 3.773-1.574h.774l-1.174-1.12a1.234 1.234.0 01-.373-.906c0-.356.124-.658.373-.907l.027-.027c.267-.249.573-.373.92-.373s.653.124.92.373L9.653 4.44c.071.071.134.142.187.213h4.267a.836.836.0 01.16-.213l2.853-2.747c.267-.249.573-.373.92-.373s.662.151.929.4.391.551.391.907c0 .355-.124.657-.373.906zM5.333 7.24c-.746.018-1.373.276-1.88.773-.506.498-.769 1.13-.786 1.894v7.52c.017.764.28 1.395.786 1.893.507.498 1.134.756 1.88.773h13.334c.746-.017 1.373-.275 1.88-.773.506-.498.769-1.129.786-1.893v-7.52c-.017-.765-.28-1.396-.786-1.894-.507-.497-1.134-.755-1.88-.773zM8 11.107c.373.0.684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c0-.373.129-.689.386-.947.258-.257.574-.386.947-.386zm8 0c.373.0.684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c.017-.391.15-.711.4-.96.249-.249.56-.373.933-.373z"/></svg></a></li><li><a href=https://github.com/xianfei target=_blank title=GitHub><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=../../><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>ä¸»é¡µ</span></a></li><li><a href=../../about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>ä¸ªäººç®€ä»‹</span></a></li><li><a href=../../gallery/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>æ‘„å½±ä½œå“å±•</span></a></li><li><a href=../../search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>æœç´¢</span></a></li><li><a href=../../links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>å‹æƒ…é“¾æ¥</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=../../p/wasm/><img src=../../p/wasm/wasm_hu9cd79e3bd4f8565d3c544d147212ce46_404011_800x0_resize_box_3.png srcset="../../p/wasm/wasm_hu9cd79e3bd4f8565d3c544d147212ce46_404011_800x0_resize_box_3.png 800w, ../../p/wasm/wasm_hu9cd79e3bd4f8565d3c544d147212ce46_404011_1600x0_resize_box_3.png 1600w" width=800 height=272 loading=lazy alt="Featured image of post WebAssemblyäº†è§£ä¸€ä¸‹ï¼"></a></div><div class=article-details style=padding-top:0;margin-top:-20px><header class=article-category><a href=../../categories/web/ style=background-color:#5b66e5ee;backdrop-filter:saturate(2)blur(25px);--color1:#5b66e555;--color2:#5b66e577>Web</a>
<a href=../../categories/c++/ style=background-color:#5b66e5ee;backdrop-filter:saturate(2)blur(25px);--color1:#5b66e555;--color2:#5b66e577>C++</a></header><div class=article-title-wrapper><h2 class=article-title><a href=../../p/wasm/>WebAssemblyäº†è§£ä¸€ä¸‹ï¼</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Jun 01, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é˜…è¯»æ—¶é•¿: 3 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><script>document.querySelector("article").style.setProperty("--accent-color","#5b66e5")</script><style>.xf-img-full{max-width:calc(100% + var(--card-padding) * 2)!important;margin-left:calc((var(--card-padding)) * -1);margin-right:calc((var(--card-padding)) * -1);width:calc(100% + var(--card-padding) * 2)}@media screen and (max-width:600px){.xf-img{width:100%}.xf-img-2{width:80%;margin-left:10%}}@media screen and (min-width:600px){.xf-img{width:400px;margin-left:calc(50% - 200px)}.xf-img-2{width:300px;margin-left:calc(50% - 150px)}}.xf-video{margin-left:calc((var(--card-padding)) * -1);margin-right:calc((var(--card-padding)) * -1);width:calc(100% + var(--card-padding) * 2)}.xf-video video{width:100%}</style><h2 id=ä»€ä¹ˆæ˜¯-webassembly>ä»€ä¹ˆæ˜¯ WebAssemblyï¼Ÿ</h2><blockquote><p>WebAssembly (abbreviated Wasm) is a binary instruction format for a stack-based virtual machine. Wasm is designed as a portable compilation target for programming languages, enabling deployment on the web for client and server applications.</p><span class=cite><span>â€• </span><a href=https://webassembly.org/><cite>webassembly.org</cite></a></span></blockquote><p>WebAssembly æ˜¯ä¸€ç§æ–°çš„ç¼–ç æ–¹å¼ï¼Œå¯ä»¥åœ¨ç°ä»£çš„ç½‘ç»œæµè§ˆå™¨ä¸­è¿è¡Œ ï¼ å®ƒæ˜¯ä¸€ç§ä½çº§çš„ç±»æ±‡ç¼–è¯­è¨€ï¼Œå…·æœ‰ç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå¯ä»¥æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½è¿è¡Œï¼Œå¹¶ä¸ºè¯¸å¦‚ C / C ++ç­‰è¯­è¨€æä¾›ä¸€ä¸ªç¼–è¯‘ç›®æ ‡ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨ Web ä¸Šè¿è¡Œã€‚å®ƒä¹Ÿè¢«è®¾è®¡ä¸ºå¯ä»¥ä¸ JavaScript å…±å­˜ï¼Œå…è®¸ä¸¤è€…ä¸€èµ·å·¥ä½œã€‚</p><p>å¯¹äºç½‘ç»œå¹³å°è€Œè¨€ï¼ŒWebAssembly å…·æœ‰å·¨å¤§çš„æ„ä¹‰â€”â€”å®ƒæä¾›äº†ä¸€æ¡é€”å¾„ï¼Œä»¥ä½¿å¾—ä»¥å„ç§è¯­è¨€ç¼–å†™çš„ä»£ç éƒ½å¯ä»¥ä»¥æ¥è¿‘åŸç”Ÿçš„é€Ÿåº¦åœ¨ Web ä¸­è¿è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»¥å‰æ— æ³•ä»¥æ­¤æ–¹å¼è¿è¡Œçš„å®¢æˆ·ç«¯è½¯ä»¶éƒ½å°†å¯ä»¥è¿è¡Œåœ¨ Web ä¸­ã€‚</p><p>WebAssembly è¢«è®¾è®¡ä¸ºå¯ä»¥å’Œ JavaScript ä¸€èµ·ååŒå·¥ä½œâ€”â€”é€šè¿‡ä½¿ç”¨ WebAssembly çš„ JavaScript APIï¼Œä½ å¯ä»¥æŠŠ WebAssembly æ¨¡å—åŠ è½½åˆ°ä¸€ä¸ª JavaScript åº”ç”¨ä¸­å¹¶ä¸”åœ¨ä¸¤è€…ä¹‹é—´å…±äº«åŠŸèƒ½ã€‚è¿™å…è®¸ä½ åœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­åˆ©ç”¨ WebAssembly çš„æ€§èƒ½å’Œå¨åŠ›ä»¥åŠ JavaScript çš„è¡¨è¾¾åŠ›å’Œçµæ´»æ€§ï¼Œå³ä½¿ä½ å¯èƒ½å¹¶ä¸çŸ¥é“å¦‚ä½•ç¼–å†™ WebAssembly ä»£ç ã€‚</p><p>ä»¥ä¸Šä¸‰æ®µå†…å®¹æ¥è‡ª MDNï¼š <a class=link href=https://developer.mozilla.org/zh-CN/docs/WebAssembly target=_blank rel=noopener>https://developer.mozilla.org/zh-CN/docs/WebAssembly</a></p><h2 id=å®‰è£…ç¼–è¯‘å™¨>å®‰è£…ç¼–è¯‘å™¨</h2><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ª WebAssembly ç¼–è¯‘å™¨<strong>emscripten</strong>ã€‚å¯¹äº macOS å¯ä½¿ç”¨ brew è¿›è¡Œå®‰è£…</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>brew install emscripten
</span></span></code></pre></td></tr></table></div></div><h3 id=æµ‹è¯•-emscripten-æ˜¯å¦å®‰è£…æˆåŠŸ>æµ‹è¯• emscripten æ˜¯å¦å®‰è£…æˆåŠŸ</h3><p>æ­¤å¤„æˆ‘ä»¬å¯ä»¥è¿è¡Œ<code>emcc</code>å’Œ<code>emcc --version</code>æ¥æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><img class=xf-img-full src=p1.png><h2 id=åœ¨-web-ä¸­è¿è¡Œ-c-è¯­è¨€ä»£ç >åœ¨ Web ä¸­è¿è¡Œ C è¯­è¨€ä»£ç </h2><p>C++ç”±äºå¯¹å‡½æ•°é‡è½½ã€é¢å‘å¯¹è±¡ã€åå­—ç©ºé—´ï¼ˆnamespaceï¼‰ç­‰çš„æ”¯æŒï¼Œä½¿å¾—å…¶ç¬¦å·åï¼ˆmangled symbolsï¼‰ä¸å¦‚ C è¯­è¨€ç›´è§‚ï¼Œæœ¬æ–‡å…ˆä½¿ç”¨ C è¯­è¨€è¿›è¡Œæ¼”ç¤ºã€‚</p><h3 id=ç¼–å†™-c-ä»£ç >ç¼–å†™ C ä»£ç </h3><p>ä¸‹é¢æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªéå¸¸ç®€å•çš„ C è¯­è¨€ä¾‹å­ï¼Œå®ƒå°†ä¼šè¿”å›ä¸¤æ•°ä¹‹å’Œï¼Œåœ¨ä½ æ‰€ä½¿ç”¨çš„å·¥ä½œç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª test.c æ–‡ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;emscripten/emscripten.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>// ä¸€æ—¦WASMæ¨¡å—è¢«åŠ è½½ï¼Œmain()ä¸­çš„ä»£ç å°±ä¼šæ‰§è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=o>**</span> <span class=n>argv</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=s>&#34;WebAssembly module loaded</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// è¿”å›ä¸¤æ•°ä¹‹å’Œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>EMSCRIPTEN_KEEPALIVE</span> <span class=nf>get_sum</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span><span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å°†-c-ç¼–è¯‘ä¸º-webassembly>å°† C ç¼–è¯‘ä¸º WebAssembly</h3><p>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº† C ä»£ç ï¼Œæ¥ä¸‹æ¥éœ€è¦å°†å®ƒç¼–è¯‘æˆ wasmï¼Œä¸ä»…å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç”Ÿæˆç›¸åº”çš„ JavaScript èƒ¶æ¥ä»£ç ä»¥ä¾¿èƒ½å¤ŸçœŸæ­£è¿è¡Œèµ·æ¥ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>emcc test.c -s <span class=nv>WASM</span><span class=o>=</span><span class=m>1</span> -O2 -o index.js
</span></span></code></pre></td></tr></table></div></div><p>å„ä¸ªå‚æ•°å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li>emccâ€”â€”ä»£è¡¨ Emscripten ç¼–è¯‘å™¨ï¼›</li><li>test.câ€”â€”åŒ…å« C ä»£ç çš„æ–‡ä»¶ï¼›</li><li>-s WASM=1â€”â€”æŒ‡å®šä½¿ç”¨ WebAssemblyï¼›</li><li>-O2â€”â€”ä»£ç ä¼˜åŒ–çº§åˆ«ï¼›</li><li>-o index.jsâ€”â€”æŒ‡å®šç”ŸæˆåŒ…å« wasm æ¨¡å—æ‰€éœ€çš„å…¨éƒ¨èƒ¶æ¥ä»£ç çš„ JS æ–‡ä»¶ï¼›</li></ul><p>ç¼–è¯‘å®Œæˆåï¼Œä¼šç”Ÿæˆ index.js ä¸ index.wasm æ–‡ä»¶ã€‚</p><h3 id=ç¼–å†™-html-ä»£ç >ç¼–å†™ HTML ä»£ç </h3><p>åœ¨æµè§ˆå™¨ä¸­å¤„ç† WebAssembly æœ‰ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ API å¯ä»¥ä½¿ç”¨ï¼Œåœ¨æ­¤æˆ‘ä»¬ä¸ä¼šè¿›è¡Œæ·±å…¥æ¢è®¨å› ä¸ºè¿™å·²ç»è¶…å‡ºäº†å…¥é—¨çš„èŒƒç•´ï¼Œæˆ‘ä»¬åªéœ€è¦ Module æ¥å£åŠå…¶ ccall æ–¹æ³•è¿™éƒ¨åˆ†å³å¯ã€‚è¯¥æ–¹æ³•å…è®¸æˆ‘ä»¬é€šè¿‡å‡½æ•°åä» C ä»£ç ä¸­è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå°±å‘ä¸€èˆ¬çš„ JS å‡½æ•°ä¸€æ ·ä½¿ç”¨å°±è¡Œäº†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>Module</span><span class=p>.</span><span class=nx>ccall</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;funcName&#34;</span><span class=p>,</span> <span class=c1>// å‡½æ•°å
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;number&#34;</span><span class=p>,</span> <span class=c1>// è¿”å›ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>[</span><span class=s2>&#34;number&#34;</span><span class=p>],</span> <span class=c1>// å‚æ•°ç±»å‹
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>[</span><span class=mi>42</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>);</span> <span class=c1>// å‚æ•°
</span></span></span></code></pre></td></tr></table></div></div><p>è°ƒç”¨æ­¤æ–¹æ³•ä¹‹åï¼Œresult å°±å°†æ‹¥æœ‰å¯¹åº” C å‡½æ•°çš„æ‰€æœ‰åŠŸèƒ½ï¼Œé™¤å‡½æ•°åä»¥å¤–çš„æ‰€æœ‰å‚æ•°éƒ½æ˜¯å¯é€‰çš„ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç¼©å†™ç‰ˆï¼ˆä½¿ç”¨ç¬¦å·åï¼‰ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>_funcName</span><span class=p>(</span><span class=nx>args</span><span class=p>...);</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥ç€æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ª HTML æ–‡ä»¶ï¼Œæ­¤å¤„å‘½åä¸º index.htmlï¼ŒåŒ…å«ä¸€ä¸ªæŒ‰é’®å’Œä¸€ä¸ª div å—ç”¨æ¥æ˜¾ç¤ºç»“æœã€‚</p><p>ç„¶åæˆ‘ä»¬æ·»åŠ ä¸€ä¸ª script æ ‡ç­¾ç”¨æ¥ç¼–å†™åœ¨ JavaScript ä¸­è°ƒç”¨ wasm æ¨¡å—çš„ä»£ç ã€‚ç”±äºèƒ¶æ¥ä»£ç çš„å­˜åœ¨ï¼ˆindex.jsï¼‰ï¼Œè¿™é¡¹ä»»åŠ¡å˜å¾—éå¸¸ç®€å•ï¼Œå®ƒå·²ç»ä¸ºæˆ‘ä»¬å¤„ç†å¥½äº†æ‰€æœ‰çš„æ¥çº¿ä»»åŠ¡ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;!DOCTYPE html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;utf-8&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>http-equiv</span><span class=o>=</span><span class=s>&#34;X-UA-Compatible&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;IE=edge&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>WebAssembly ç¤ºä¾‹<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;viewport&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;width=device-width, initial-scale=1&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>button</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;run&#34;</span><span class=p>&gt;</span>æ‰§è¡Œï¼<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;result&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;index.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=c1>// å½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œå…¶å€¼å°†ä¼šè¢«æ”¹å˜
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=kd>var</span> <span class=nx>runButton</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s2>&#34;#run&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=nx>runButton</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;click&#34;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è°ƒç”¨Cä»£ç ä¸­çš„get_sumå‡½æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kd>var</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>_get_sum</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s2>&#34;#result&#34;</span><span class=p>).</span><span class=nx>innerText</span> <span class=o>=</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åè®¿é—®è¯¥ç½‘é¡µï¼Œæ­¤å¤„ä½¿ç”¨VSCodeçš„Live Serveræ’ä»¶è¿›è¡Œè®¿é—®ï¼ˆå…¶ä»–HTTPæ–‡ä»¶æœåŠ¡å™¨ä¹Ÿå¯ä»¥ï¼‰ï¼Œ<strong>ä¸èƒ½é€šè¿‡ç›´æ¥æ‰“å¼€htmlæ–‡ä»¶çš„æ–¹å¼è¿è¡Œ</strong>ï¼ˆç”±äºCORSæœ¬åœ°æ–‡ä»¶é™åˆ¶ï¼‰</p><img class=xf-img-full src=p3.webp><h2 id=é‚£ä¹ˆcå‘¢>é‚£ä¹ˆï¼ŒC++å‘¢ï¼Ÿ</h2><p>é¦–å…ˆï¼Œå…ˆå°†ä¸Šé¢çš„ä»£ç è½¬æ¢ä¸ºC++ä»£ç ï¼Œå¹¶ä¿å­˜ä¸ºtest.cppæ–‡ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;emscripten/emscripten.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span> 
</span></span><span class=line><span class=cl><span class=c1>// ä¸€æ—¦WASMæ¨¡å—è¢«åŠ è½½ï¼Œmain()ä¸­çš„ä»£ç å°±ä¼šæ‰§è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=o>**</span> <span class=n>argv</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;WebAssembly module loaded&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=c1>// è¿”å›ä¸¤æ•°ä¹‹å’Œ
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>EMSCRIPTEN_KEEPALIVE</span> <span class=nf>get_sum</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span><span class=kt>int</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åä½¿ç”¨ç›¸åŒçš„æ–¹å¼è¿›è¡Œç¼–è¯‘ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>emcc test.cpp -s <span class=nv>WASM</span><span class=o>=</span><span class=m>1</span> -O2 -o index.js
</span></span></code></pre></td></tr></table></div></div><p>C++æœ‰ç€å¤æ‚çš„<a class=link href=http://web.mit.edu/tibbetts/Public/inside-c/www/mangling.html target=_blank rel=noopener>Symbol Mangling</a>è§„åˆ™ï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆä»æ ‡å‡†C++æ–‡ä»¶è¿›è¡Œåˆ†æï¼Œä½¿ç”¨g++ç¼–è¯‘åä½¿ç”¨nmå‘½ä»¤åˆ†æç¬¦å·ï¼Œå¦‚ä¸‹å›¾ã€‚</p><img class=xf-img-full src=p4.png><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œæˆ‘ä»¬æ‰€ç¼–å†™çš„å‡½æ•°ç¬¦å·åä¸º__Z7get_sumiiï¼Œäºæ˜¯å¯ä»¥ä½¿ç”¨è¯¥ç¬¦å·åè°ƒç”¨æ­¤å‡½æ•°ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;!DOCTYPE html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;utf-8&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>http-equiv</span><span class=o>=</span><span class=s>&#34;X-UA-Compatible&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;IE=edge&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>WebAssembly ç¤ºä¾‹<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;viewport&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;width=device-width, initial-scale=1&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>button</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;run&#34;</span><span class=p>&gt;</span>æ‰§è¡Œï¼<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;result&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;index.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=c1>// å½“æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œå…¶å€¼å°†ä¼šè¢«æ”¹å˜
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=kd>var</span> <span class=nx>runButton</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s2>&#34;#run&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=nx>runButton</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;click&#34;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// è°ƒç”¨C++ä»£ç ä¸­çš„get_sumå‡½æ•°
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kd>var</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>__Z7get_sumii</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s2>&#34;#result&#34;</span><span class=p>).</span><span class=nx>innerText</span> <span class=o>=</span> <span class=nx>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘ä»¬é€šè¿‡DevToolsæŸ¥çœ‹WebAssemblyåæ±‡ç¼–ä»£ç ï¼Œä¹Ÿå¯ä»¥è¯å®è¿™ä¸€ç‚¹</p><img class=xf-img-full src=p5.webp></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=../../p/yolo/><div class=article-image><img src=../../p/yolo/banner.5ac78b2de73692ebea04486c93b88fca_hueca99897b332f16a3fd737e22c709ddd_1173106_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post å†™ä¸€ä¸ªç®€ç®€å•å•çš„Pythonåç«¯çš„Webç›®æ ‡è¯†åˆ«ç½‘é¡µå§" data-key=yolo data-hash="md5-WseLLec2kuvqBEhsk7iPyg=="></div><div class=article-details><h2 class=article-title>å†™ä¸€ä¸ªç®€ç®€å•å•çš„Pythonåç«¯çš„Webç›®æ ‡è¯†åˆ«ç½‘é¡µå§</h2></div></a></article><article class=has-image><a href=../../p/ar2022/><div class=article-image><img src=../../p/ar2022/ar2022.86e71b46a993f3fbc6a15d7f052ece23_huf6485039128f9075441ee9cad5d655c0_500386_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post ARå†°å¢©å¢©ä¸é›ªå®¹èï¼åœ¨å®¶ä¹Ÿèƒ½å’Œå†°å¢©å¢©åˆç…§å•¦~" data-key=ar2022 data-hash="md5-hucbRqmT8/vGoV1/BS7OIw=="></div><div class=article-details><h2 class=article-title>ARå†°å¢©å¢©ä¸é›ªå®¹èï¼åœ¨å®¶ä¹Ÿèƒ½å’Œå†°å¢©å¢©åˆç…§å•¦~</h2></div></a></article><article class=has-image><a href=../../p/%E6%88%90%E8%AF%AD%E7%94%9F%E6%88%90%E5%99%A8/><div class=article-image><img src=../../p/%E6%88%90%E8%AF%AD%E7%94%9F%E6%88%90%E5%99%A8/banner.1796225b91d59a6e23ed928d77e47d3b_huf1e48fbcfb498bd1e6f5485ca95ebe62_255681_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post æˆè¯­ç”Ÿæˆå™¨" data-hash="md5-F5YiW5HVmm4j7ZKNd+R9Ow=="></div><div class=article-details><h2 class=article-title>æˆè¯­ç”Ÿæˆå™¨</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=xianfei/xianfei.github.io issue-term=pathname crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2022 è¡”é£çš„åšå®¢</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.12.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ä»€ä¹ˆæ˜¯-webassembly>ä»€ä¹ˆæ˜¯ WebAssemblyï¼Ÿ</a></li><li><a href=#å®‰è£…ç¼–è¯‘å™¨>å®‰è£…ç¼–è¯‘å™¨</a><ol><li><a href=#æµ‹è¯•-emscripten-æ˜¯å¦å®‰è£…æˆåŠŸ>æµ‹è¯• emscripten æ˜¯å¦å®‰è£…æˆåŠŸ</a></li></ol></li><li><a href=#åœ¨-web-ä¸­è¿è¡Œ-c-è¯­è¨€ä»£ç >åœ¨ Web ä¸­è¿è¡Œ C è¯­è¨€ä»£ç </a><ol><li><a href=#ç¼–å†™-c-ä»£ç >ç¼–å†™ C ä»£ç </a></li><li><a href=#å°†-c-ç¼–è¯‘ä¸º-webassembly>å°† C ç¼–è¯‘ä¸º WebAssembly</a></li><li><a href=#ç¼–å†™-html-ä»£ç >ç¼–å†™ HTML ä»£ç </a></li></ol></li><li><a href=#é‚£ä¹ˆcå‘¢>é‚£ä¹ˆï¼ŒC++å‘¢ï¼Ÿ</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=../../ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>