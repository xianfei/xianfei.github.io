<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Tech on Xianfei's Blog</title><link>/categories/tech/</link><description>Recent content in Tech on Xianfei's Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 29 Aug 2022 00:00:00 +0000</lastBuildDate><atom:link href="/categories/tech/index.xml" rel="self" type="application/rss+xml"/><item><title>来聊聊我的本科毕业设计吧</title><link>/p/bishe/</link><pubDate>Mon, 29 Aug 2022 00:00:00 +0000</pubDate><guid>/p/bishe/</guid><description>&lt;img src="/p/bishe/sysmocap.png" alt="Featured image of post 来聊聊我的本科毕业设计吧" />&lt;p>完整版毕业论文可在微信公众号Xianfei进行查看。&lt;/p>
&lt;p>目前该项目的英文版论文已被收录至IEEE ISMAR 2022-Adjunct中。&lt;/p>
&lt;p>该项目截至发稿前在Github已获得1.5k Stars，介绍视频在B站获得了2.7万赞及1.1万硬币。&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/xianfei/SysMocap/" target="_blank" rel="noopener"
>https://github.com/xianfei/SysMocap/&lt;/a>&lt;/p>
&lt;h2 id="前言">前言&lt;/h2>
&lt;p>大学四年转瞬即逝，四年的时光让我学会了许多知识，而毕业设计作为本科期间最后一次自己独立实现自己想做的项目，希望能做一个前沿、有用、有趣的软件，在与指导老师一番沟通后，决定做一个用视频驱动虚拟形象的系统，也就是一个虚拟主播系统，可以选择自己的虚拟形象，并且让虚拟形象跟着自己动。&lt;/p>
&lt;p>&lt;img src="../../p/bishe/Picture1.jpg"
width="1320"
height="577"
srcset="../../p/bishe/Picture1_huaddd65762d49a339faa9b38767bdeaf7_165064_480x0_resize_q75_box.jpg 480w, ../../p/bishe/Picture1_huaddd65762d49a339faa9b38767bdeaf7_165064_1024x0_resize_q75_box.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="228"
data-flex-basis="549px"
>&lt;/p>
&lt;p>当然，这个系统的开发对于我来说是个不小的挑战，它涉及了计算机视觉、计算机图形学、桌面图形界面程序开发、网络通信等知识。而且对于姿态评估及动作捕捉方面的前沿技术之前的学习生活中并没有了解，于是指导老师拿给我了Kinect（一个专门用于动作捕捉的硬件）并且让我了解了一些这方面的开源项目，并且跟我说明了我需要做什么——使用开源的算法获得到的动作数据来驱动虚拟形象的骨骼运动。并且，我也了解到了虚幻引擎、Unity等三维图形引擎的知识。&lt;/p>
&lt;h2 id="技术方案">技术方案&lt;/h2>
&lt;p>在开发过程中，研究并对比了多种现有的算法，但是许多算法的运行环境很苛刻，需要专业的计算机配置才能运行。而我希望我做的系统是大家都能用上的，让大家能够体会到科技的乐趣。&lt;/p>
&lt;p>在浏览这方面的开源项目时，突然发现了Google TensorFlow Blog上的一篇文章&lt;a class="link" href="https://blog.tensorflow.org/2021/08/3d-pose-detection-with-mediapipe-blazepose-ghum-tfjs.html" target="_blank" rel="noopener"
>3D Pose Detection with MediaPipe BlazePose GHUM and TensorFlow.js&lt;/a>，其中谈到了一种基于Web技术的3D人体关节点检测方法。诶！Web技术！这不正好提供了非常强大的可移植性和通用行吗！配合之前使用过的Electron框架，能开发出体验一流的跨平台桌面端GUI应用程序。&lt;/p>
&lt;p>&lt;img src="../../p/bishe/p2.png"
width="3314"
height="2120"
srcset="../../p/bishe/p2_hu65dda13bc3c58b168e3a0269cbcb8752_364620_480x0_resize_box_3.png 480w, ../../p/bishe/p2_hu65dda13bc3c58b168e3a0269cbcb8752_364620_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="156"
data-flex-basis="375px"
>&lt;/p>
&lt;p>当然，更好的是，这个叫做&lt;a class="link" href="https://github.com/yeemachine/kalidokit" target="_blank" rel="noopener"
>kalidokit&lt;/a>项目还给出了源代码，它给出的Pipeline如下图所示：&lt;/p>
&lt;p>&lt;img src="../../p/bishe/kalidokit-pipeline.png"
width="2947"
height="1459"
srcset="../../p/bishe/kalidokit-pipeline_hufd0f0c0c717966a1110ef505dc83a13f_501002_480x0_resize_box_3.png 480w, ../../p/bishe/kalidokit-pipeline_hufd0f0c0c717966a1110ef505dc83a13f_501002_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="201"
data-flex-basis="484px"
>&lt;/p>
&lt;p>于是我就去研究了一下Mediapipe和kalidokit&lt;/p>
&lt;h2 id="创新点">创新点&lt;/h2>
&lt;p>Mediapipe和kalidokit的帮助下已经可以完成毕业设计课题中的一大步了，但是kalidokit自带的demo只能驱动VRM类型的虚拟形象，而面对更常见的fbx、glb/gltf则无从下手。&lt;/p>
&lt;p>同时在实现任务书中的功能之后，我希望能够再加入一些实用的功能和前沿的功能。因为最近虚拟主播很火爆，所以该软件生成的虚拟形象需要实时应用于直播。于是设计了基于HTTP和WebSocket的虚拟形象及动作转发系统，并且为OBS直播软件专门设置了接口，使其可以直接被用于推流到主流平台中。&lt;/p>
&lt;p>但是目前常规的直播都是二维图像直播，在这个元宇宙即将来临的时代，AR/VR/MR（增强现实、虚拟现实与混合现实）必会成为主流趋势，所以我在想能不能定义一种全新的直播方式，可以让用户更为直观的看到对方的虚拟形象呢？于是就设计了基于WebXR技术的虚拟形象直播方案，用户只需要在支持WebXR的设备上访问该系统，即可实时的通过网络在周围环境中查看虚拟形象及其动作。就像科幻电影里面的那样，打开支持AR的手机或带上支持VR/MR的眼镜，虚拟形象就站在你的面前。&lt;/p>
&lt;p>主要来说要做的事情如下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>使其可以驱动不同类型的虚拟形象&lt;/p>
&lt;/li>
&lt;li>
&lt;p>为其编写一套简单易用好看的GUI&lt;/p>
&lt;/li>
&lt;li>
&lt;p>支持OBS进行直播&lt;/p>
&lt;/li>
&lt;li>
&lt;p>支持AR/VR展示&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="难点">难点&lt;/h2>
&lt;h3 id="使其可以驱动不同类型的虚拟形象">使其可以驱动不同类型的虚拟形象&lt;/h3>
&lt;p>面对这个工作，首先我了解3D模型的骨骼，3D模型之所以能动，是因为他有骨骼，也就是说3D模型有骨骼是能够让他动起来的必要条件。不同的虚拟形象模型，往往有着不同的骨骼结构及命名规则。图中为冰墩墩的骨骼（自己绑定的）和VRM虚拟形象的骨骼（自带的）。&lt;/p>
&lt;p>&lt;img src="../../p/bishe/p3.png"
width="2424"
height="742"
srcset="../../p/bishe/p3_hu9d8998487cff97b03a102d0b6830cd95_1818310_480x0_resize_box_3.png 480w, ../../p/bishe/p3_hu9d8998487cff97b03a102d0b6830cd95_1818310_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="326"
data-flex-basis="784px"
>&lt;/p>
&lt;p>我们可以发现其骨骼数量是不一样的，其实命名方式也是不一样的，甚至骨骼的坐标系、运动方式都是不一样的，比如下图中三种不同的虚拟形象，做同样的动作时，对坐标的操作是不一样的。&lt;/p>
&lt;img class="xf-img" src="coordinate.jpg">
&lt;p>这或许是迄今为止首个可以支持多种不同虚拟形象格式、不同类型不同骨骼结构的虚拟主播软件。&lt;/p>
&lt;h3 id="ar展示">AR展示&lt;/h3>
&lt;p>在写上期的《AR冰墩墩》文章的时候，就是想着在毕设中可以实现AR冰墩墩跟着我做一样的动作。上期用到的&lt;a class="link" href="https://modelviewer.dev/" target="_blank" rel="noopener"
>&amp;lt;model-viewer&amp;gt;&lt;/a>就是基于Three.js开发的，使用WebXR浏览AR内容。但是由于前者是高度封装的，我们想让虚拟形象实时的做指定的动作，需要对虚拟形象骨骼的控制能力。于是就用参考&lt;a class="link" href="https://threejs.org/docs/#manual/en/introduction/How-to-create-VR-content" target="_blank" rel="noopener"
>这篇文章&lt;/a>编写了WebXR接口。&lt;/p>
&lt;p>这或许是迄今为止首个可以用来AR/VR直播的虚拟主播软件。&lt;/p>
&lt;h3 id="gui">GUI&lt;/h3>
&lt;p>一个好看的程序就让用户有更多想用的欲望。所以在界面设计上下了许多的功夫，比如采用了自动取色算法进行色彩搭配，比如在添加虚拟形象时的非线性动画，比如在删除虚拟形象时的粒子爆炸效果……&lt;/p>
&lt;p>&lt;img src="../../p/bishe/p4.png"
width="1878"
height="654"
srcset="../../p/bishe/p4_hu6829a844c26691708e4953c673e7135e_935170_480x0_resize_box_3.png 480w, ../../p/bishe/p4_hu6829a844c26691708e4953c673e7135e_935170_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="287"
data-flex-basis="689px"
>&lt;/p>
&lt;p>这或许是迄今为止最好看的跨平台虚拟主播软件。&lt;/p>
&lt;h2 id="结束语">结束语&lt;/h2>
&lt;p>在完成毕设的过程中，学到了许多计算机图形学的知识——比如欧拉角、旋转矩阵、四元数、球面插值等。&lt;/p>
&lt;p>之前我的一个朋友跟我说，她在一个她关注的公众号上看见了对我的毕设的介绍，我一看还真是。&lt;/p>
&lt;img class="xf-img" src="p5.png">
&lt;p>&lt;a class="link" href="https://mp.weixin.qq.com/s/54vewhYrAfEyqLAAYUVkBw" target="_blank" rel="noopener"
>这篇文章中&lt;/a>对我的毕设的评价是“杀疯了”😂&lt;/p>
&lt;p>其实只是想做点儿有趣的事情罢了，当时就在想，我的毕设应该是那种，可能我们班我们专业的换别人就不一定能做出来的东西。&lt;/p></description></item></channel></rss>